import{_ as w,r as g,c as V,a as o,w as s,b as l,u as b,o as x,d as m,e as i,E as n,f as y}from"./index-8_VHx90v.js";const k={class:"login-container"},C={__name:"Login",setup(N){const c=b(),a=g({username:"",password:""}),_=async()=>{if(!a.value.username||!a.value.password){n.warning("请填写完整信息");return}try{const t=new FormData;t.append("username",a.value.username),t.append("password",a.value.password);const e=await y.post("/api/student/login",t);e.data.code===200?(n.success("登录成功"),localStorage.setItem("user",JSON.stringify(e.data.data)),c.push("/")):n.error(e.data.msg||"登录失败")}catch(t){console.error(t),n.error("网络错误")}};return(t,e)=>{const u=l("el-input"),d=l("el-form-item"),p=l("el-button"),f=l("el-form"),v=l("el-card");return x(),V("div",k,[o(v,{class:"box-card"},{header:s(()=>[...e[3]||(e[3]=[i("div",{class:"card-header"},[i("span",null,"登录")],-1)])]),default:s(()=>[o(f,{model:a.value,"label-width":"80px"},{default:s(()=>[o(d,{label:"用户名"},{default:s(()=>[o(u,{modelValue:a.value.username,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value.username=r),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),o(d,{label:"密码"},{default:s(()=>[o(u,{modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.password=r),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),o(d,null,{default:s(()=>[o(p,{type:"primary",onClick:_},{default:s(()=>[...e[4]||(e[4]=[m("登录",-1)])]),_:1}),o(p,{onClick:e[2]||(e[2]=r=>t.$router.push("/register"))},{default:s(()=>[...e[5]||(e[5]=[m("去注册",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},E=w(C,[["__scopeId","data-v-47f279dc"]]);export{E as default};
